
<!DOCTYPE html>
<html lang="ZH">
<head>
    <title>税收分类编码管理</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    <link rel="stylesheet" href="../../libs/customer/index.css">
    <script src="../../libs/ajaxupload.js"></script>


    <style type="text/css">
        .hideItem {
            display: none;
        }

        .showItem {
            display: block;
        }

        /*.form-row {
            width: 98%;
            display: flex;
            flex-direction: row;
        }*/

        .input-class {
            -webkit-appearance: none;
            background-color: #fff;
            background-image: none;
            border: 0.01rem solid #dcdfe6;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            color: #606266;
            display: inline-block;
            font-size: inherit;
            height: 0.4rem;
            line-height: 0.4rem;
            outline: 0;
            padding: 0 0.15rem;
            -webkit-transition: border-color .2s cubic-bezier(.645, .045, .355, 1);
            transition: border-color .2s cubic-bezier(.645, .045, .355, 1);
        }

        .form-item,.el-col-16{
            width: 50%;
        }
        .el-col-5{
            width: 11%;
        }
        .el-aside {
            background-color: #fff;
            border: 0.01rem rgba(157, 201, 247, 0.33) solid;
            text-align: center;
        }

        .el-main {
            border: 0.01rem rgba(157, 201, 247, 0.33) solid;
            background-color: #fff;
            text-align: center;
            padding: 0 0 0 0;
            overflow: hidden;
        }

        .el-dialog__body {
            padding: 0.15rem 0.2rem;
            border: 0.01rem solid #dcdfe6;
        }

        .el-dialog {
            width: 8.0rem;
        }

        .el-dialog__header{
            background: #333333;
            color: white;
        }
        .el-dialog__header span,.el-dialog__header i{
            color: white !important;
        }

        .ui-jqgrid .ui-jqgrid-bdiv {
            overflow: scroll;
        }

        .ui-th-column .ui-th-ltr {
            min-width: 0.3rem;
        }

        .el-select-dropdown__list {
            padding: 0;
        }

        .el-form-item {
            margin-bottom: 0.1rem;
        }

        .el-textarea {
            width: 5.09rem;
        }
        [v-cloak] {
            display: none;
        }

    </style>

</head>
<body>
<iframe id="ifile" style="display:none"></iframe>
<div id="rrapp" v-cloak>
    <div>
        <el-form  :model="form" class="demo-form-inline" label-width="1.0rem">
            <el-row>
                <el-col :span="12">
                <el-form-item label="商品名称:" prop="goodsName">
                    <el-input v-model.trim="form.goodsName" maxlength="100"  placeholder="请输入商品名称"></el-input>
                </el-form-item>
                </el-col>
                <el-col :span="12">
                <el-form-item label="商品编码:" prop="goodsCode">
                    <el-input v-model.trim="form.goodsCode" maxlength="100"  placeholder="请输入商品编码"></el-input>
                </el-form-item>
                </el-col>
                <el-col :span="12">
                <el-form-item label="税收分类名称:" prop="ssbmName" class="labelLong">
                    <el-input v-model.trim="form.ssbmName" maxlength="100"  placeholder="请输入税收分类名称"></el-input>
                </el-form-item>
                </el-col>

                <el-col :span="12">
                <el-form-item label="商品税收编码:" prop="ssbmCode" class="labelLong">
                    <el-input v-model.trim="form.ssbmCode" maxlength="100"  placeholder="请输入商品税收编码"></el-input>
                </el-form-item>
                </el-col>

            </el-row>
            <el-row>
                <el-col :span="1" :offset="1" class="floatright">
                    <el-button class="btnexport" @click="deleteTaxCode">删除</el-button >
                </el-col>
                <el-col :span="1" :offset="1" class="floatright">
                    <el-button class="btnexport" @click="addOrUpdata(true)">新增</el-button >
                </el-col>
                <el-col :span="1" :offset="1" class="floatright">
                    <el-button class="btnexport" @click="download">下载模板</el-button >
                </el-col>
                <el-col :span="1" :offset="1" class="floatright">
                    <el-button class="btnexport" id="import">导入</el-button >
                </el-col>
                <el-col :span="1" :offset="1" class="floatright">
                    <el-button class="btnexport" @click="query">查询</el-button>
                </el-col>

            </el-row>
        </el-form>
    </div>
    <div style="margin-bottom: 0.05rem;margin-top: 0.05rem;width:100%; height:0.03rem; border-top:0.01rem solid #DEDEDE; clear:both;"></div>
    <div v-if="isShowList">

        <div style="clear: both">
            <el-table height="4rem"  border fit :data="pageTableData" highlight-current-row style="width: 100%;"
                       v-loading="listLoading" @selection-change="changeFun"
                       element-loading-text="正在拼命加载中">
                <el-table-column :show-overflow-tooltip="true"  type="selection" width="35" class="selection" prop='id'
                                 @selection-change="changeFun"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  type="index" width="60" :index="taxcategoryIndex"  label="序号" align="center"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  prop="goodsCode" label="商品编码" align="center"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  prop="goodsName" label="商品名称" header-align="center" align="left"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  prop="ssbmCode" label="税收分类编码" header-align="center" align="left"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  prop="ssbmName" label="税收分类名称" header-align="center" align="left"></el-table-column>
                <el-table-column :show-overflow-tooltip="true"  label="操作" class-name="noSpotSpotSpot" width="100" align="center">
                    <template slot-scope="scope">
                        <el-button type="text" @click="openUpdateWin(scope.row)" >修改</el-button>
                    </template>
                </el-table-column>
            </el-table>

            <el-col class="toolbar" style="padding:0.1rem;">
                <el-pagination background @current-change="currentChange" @size-change="handleSizeChange" :current-page="currentPage" :page-size="pageSize" :page-sizes="pageList" :pager-count="pagerCount"
                               layout="slot, sizes, prev, pager, next" :total="total" style="float:right">
                    <span>共{{total}}条记录，第{{currentPage}}页，共{{totalPage}}页</span>
                </el-pagination>
            </el-col>
        </div>
    </div>

    <el-dialog :title="goodsForm.title" :visible.sync="addOrUpdateWin" :before-close="closeWin" @close="clearValidate('goodsForm')" :close-on-click-modal="false">
        <el-form ref="goodsForm" :model="goodsForm" label-width="1.25rem">
            <el-row>
                <el-col :sapn="12" style="width: 45%">
                <el-form-item label="商品编码:" prop="goodsCode" :rules="[{ required: true, message: '商品编码不能为空', trigger: 'change' }]">
                    <input  v-model.trim="goodsForm.goodsCode" maxlength="100"  class="input-class" >
                </el-form-item>
                </el-col>
                <el-col :sapn="12" style="width: 45%">
                <el-form-item  label="商品名称:" prop="goodsName" :rules="[{ required: true, message: '商品名称不能为空',trigger: 'change' }]">
                    <input  v-model.trim="goodsForm.goodsName" maxlength="100"  class="input-class"  >
                </el-form-item>
                </el-col>
                <el-col :sapn="12" style="width: 45%">
                <el-form-item label="商品备注:" prop="goodsRemark" :rules="[{ required: true, message: '商品备注不能为空', trigger: 'change' }]">
                    <input  v-model.trim="goodsForm.goodsRemark" maxlength="100"  class="input-class">
                </el-form-item>
                </el-col>
            </el-row>
            <el-row>
                <el-col :span="12" style="width: 42%">
                <el-form-item label="税收分类编码:" class="labelLong" prop="ssbmCode" :rules="[{ required: true, message: '税收分类编码不能为空', trigger: 'change' }]">
                    <input :disabled="true" class="input-class" :readonly="readonly" v-model="goodsForm.ssbmCode" >
                </el-form-item>
                </el-col>
                    <el-col :span="1" style="width:16%;text-align: center">
                    <el-button class="btnexport"  @click="selectSsbmCode()">选择</el-button>
                    </el-col>
                    <el-col :span="12" style="width: 42%">
                <el-form-item label="税收分类名称:" class="labelLong" prop="ssbmName" :rules="[{ required: true, message: '税收分类名称不能为空', trigger: 'change' }]">
                    <input :disabled="true" class="input-class" :readonly="readonly" v-model="goodsForm.ssbmName" >
                </el-form-item>
                    </el-col>
            </el-row>

        </el-form>
        <span slot="footer" class="dialog-footer">
            <div align="right">
                <el-button class="btnexport" :disabled="isDisable"  @click="submitForm">保存</el-button>
            </div>
            <!--<el-button class="queryBtn" @click="closeWin()">关 闭</el-button>-->
        </span>
    </el-dialog>

    <el-dialog :title="queryTaxCodeForm.title" :visible.sync="selectTaxCodeWin" :before-close="closeTaxCodeWin" >
        <el-form ref="queryTaxCodeForm" :model="queryTaxCodeForm" label-width="1.2rem">
            <el-row>
                <el-col :span="16">
                <el-form-item label="税收分类名称:" prop="ssbmName" id="labelLong">
                    <el-input  v-model="queryTaxCodeForm.ssbmName" style="width: 2.3rem" maxlength="100"></el-input>
                </el-form-item>
                </el-col>
                <el-col :span="16">
                <el-form-item label="税收分类编码:" prop="ssbmCode" id="labelLong">
                    <el-input  v-model="queryTaxCodeForm.ssbmCode" style="width: 2.3rem" maxlength="100"></el-input>
                </el-form-item>
                </el-col>
                <el-col :span="5" :offset="1">
                    <el-button class="btnexport" @click="queryTaxCode" >查询</el-button>
                </el-col>
                <el-col :span="5" :offset="1">
                    <el-button class="btnexport" @click="queryReset" >重置</el-button>
                </el-col>
                <el-col :span="5" :offset="1">
                    <el-button class="btnexport" @click="comfirmSelect" >确定</el-button>
                </el-col>
            </el-row>
            <div style="margin-bottom: 0.05rem;margin-top: 0.05rem;width:100%; height:0.05rem; border-top:0.01rem solid #DEDEDE; clear:both;"></div>
        </el-form>
        <el-table height="4rem" ref="singleTable"  border fit :data="tableData" highlight-current-row style="clear: both;width: 100%;font-size: 0.08rem;"
                  style="width: 100%; margin-top: 0.2rem" @row-click="showRow" @current-change="handleCurrentChange"
                  v-loading="listLoading"
                  element-loading-text="正在拼命加载中">
            <el-table-column :show-overflow-tooltip="true"   width="35" center>
                <template scope="scope">
                    <el-radio class="radio" v-model="radio"  :label="scope.$index"  >&nbsp;</el-radio>
                </template>
            </el-table-column>
            <el-table-column :show-overflow-tooltip="true"  type="index" width="60" :index="taxcategoryIndex2"  label="序号" align="center"></el-table-column>
            <el-table-column :show-overflow-tooltip="true"  prop="ssbmCode" label="税收分类编码" align="left" ></el-table-column>
            <el-table-column :show-overflow-tooltip="true"  prop="ssbmName" label="税收分类名称" align="left"></el-table-column>
            <el-table-column :show-overflow-tooltip="true"  prop="explain" label="说明" align="left"></el-table-column>
        </el-table>
        <el-footer>
            <el-col class="toolbar" style="padding:0.1rem;">
                <el-pagination background @current-change="currentChange2" @size-change="handleSizeChange2" :current-page="currentPage2" :page-size="pageSize2" :page-sizes="pageList2" :pager-count="pagerCount2"
                               layout="slot, sizes, prev, pager, next" :total="total2" style="float:right">
                    <span>共{{total2}}条记录，第{{currentPage2}}页，共{{totalPage2}}页</span>
                </el-pagination>
            </el-col>
        </el-footer>
    </el-dialog>
</div>

<script type="text/javascript" charset="utf-8" src="../../js/customer/resource.js"></script>
<script src="../../js/modules/enterprise/taxcategorycode.js"></script>
</body>
</html>